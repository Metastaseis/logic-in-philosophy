@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------------
   TYPOGRAPHY DEFAULTS (from before)
   ------------------------------- */
@layer base {
  body {
    @apply font-bauhaus font-medium antialiased;
  }
  h1, h2, h3 {
    @apply font-display font-bold;
  }
}

/* ================================
   BAUHAUS VISUAL SYSTEM (GLOBAL)
   ================================ */
@layer base {
  /* Museum off-white background + crisp text */
  html, body {
    background: #F5F5EF;
    color: #111;
  }

  /* Heading scale & rhythm */
  h1 { @apply text-5xl leading-tight; }
  h2 { @apply text-3xl leading-snug; }
  h3 { @apply text-2xl leading-snug; }

  /* English-only uppercase for headings (keeps HE/AR natural) */
  :lang(en) h1, :lang(en) h2, :lang(en) h3 {
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }

  /* Accessible, brand-colored keyboard focus */
  :focus-visible {
    outline: 2px solid #d90000; /* bauRed */
    outline-offset: 2px;
  }
}

/* -------------------------------
   COMPONENT STYLES
   ------------------------------- */
@layer components {
  /* UI weight helpers */
  .ui { @apply font-semibold; }
  .ui-muted { @apply font-semibold opacity-80; }

  /* Bauhaus-style red underline for nav links (hover/active) */
  .nav-underline { position: relative; }
  .nav-underline::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px;
    height: 2px; background: #d90000;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 180ms ease;
  }
  .nav-underline:hover::after,
  .nav-underline[aria-current="page"]::after {
    transform: scaleX(1);
  }

  /* Unified buttons */
  .btn { @apply ui inline-flex items-center justify-center px-5 py-2.5 rounded-bau transition; }
  .btn-primary { @apply bg-bauRed text-white hover:bg-red-700; }
  .btn-outline { @apply border border-black/20 text-black hover:bg-black/5; }
  .btn-ghost   { @apply text-black hover:bg-black/5; }

  /* Micro-transitions for all interactive elements */
  a, button {
    transition: color .15s ease, background-color .15s ease, transform .15s ease, opacity .15s ease;
  }

  /* Link-with-arrow helper + RTL arrow flip */
  .link-arrow { display: inline-flex; align-items: center; }
  .link-arrow:hover { opacity: .9; }
  .rtl-flip { transform: scaleX(1); }
  [dir="rtl"] .rtl-flip { transform: scaleX(-1); }
}

/* -------------------------------
   UTILITIES
   ------------------------------- */
@layer utilities {
  /* Brand color fallbacks to guarantee classes always exist */
  .bg-bauRed    { background-color: #d90000; }
  .bg-bauBlue   { background-color: #0055a4; }
  .bg-bauYellow { background-color: #ffb800; }

  .text-bauRed    { color: #d90000; }
  .text-bauBlue   { color: #0055a4; }
  .text-bauYellow { color: #ffb800; }

  .border-bauRed    { border-color: #d90000; }
  .border-bauBlue   { border-color: #0055a4; }
  .border-bauYellow { border-color: #ffb800; }

  /* Bauhaus diagonal overlay used in Hero/Promo */
  .hero-diagonal {
    background: linear-gradient(
      135deg,
      #d90000 0%,
      #d90000 60%,
      rgba(0,0,0,0) 60%,
      rgba(0,0,0,0) 100%
    );
    mix-blend-mode: multiply;
  }

  /* Section spacing helpers */
  .section { @apply py-16; }
  .section-tight { @apply py-10; }

  /* Geometric corners + modern shadow */
  .rounded-bau { border-radius: 10px; }
  .shadow-bau {
    box-shadow:
      0 10px 15px -15px rgb(0 0 0 / 0.25),
      0 4px 6px -4px rgb(0 0 0 / 0.20);
  }

  /* Archive masonry */
  .masonry { column-gap: 1rem; column-count: 1; }
  @media (min-width: 768px)  { .masonry { column-count: 2; } }
  @media (min-width: 1024px) { .masonry { column-count: 3; } }
  .masonry > img, .masonry > a {
    break-inside: avoid;
    margin-bottom: 1rem;
    width: 100%;
    border-radius: 0.75rem; /* rounded-xl */
    box-shadow:
      0 10px 15px -3px rgb(0 0 0 / 0.20),
      0 4px 6px -4px rgb(0 0 0 / 0.20);
  }

  /* Optional: debug grid overlay (toggle by adding .debug-grid to <body>) */
  .debug-grid {
    background-image:
      linear-gradient(to bottom, rgba(0,0,0,0.06) 1px, transparent 1px),
      linear-gradient(to right,  rgba(0,0,0,0.04) 1px, transparent 1px);
    background-size: 8px 8px, 8px 8px;
  }
}

@layer components {
  /* Sticky header scaffold + subtle shadow/border when scrolled */
  .header-sticky { position: sticky; top: 0; z-index: 50; }

  .header-scrolled {
    box-shadow:
      0 10px 15px -20px rgb(0 0 0 / 0.4), /* softer than shadow-bau */
      0 4px 6px -4px rgb(0 0 0 / 0.25);
    border-bottom: 1px solid rgba(0,0,0,.06);
  }
}

@layer components {
  /* Kicker label above headings (small, red, uppercase for EN only) */
  .kicker {
    @apply ui text-xs mb-2 text-bauRed;
    letter-spacing: 0.08em;
  }
  :lang(en) .kicker { text-transform: uppercase; }

  /* Section heading with inline-start red block and optional red rule below */
  .section-title {
    /* size is still controlled by your h1/h2 styles; this adds the accent */
    display: inline-flex;
    align-items: flex-start;
    gap: 0.75rem;
    position: relative;
  }
  .section-title::before {
    content: "";
    display: inline-block;
    inline-size: 8px;     /* width */
    block-size: 1.2em;    /* height matches cap-height nicely */
    background: #d90000;  /* bauRed */
    margin-block-start: 0.1em;
  }

  /* Optional narrow red rule *below* the heading */
  .title-rule::after {
    content: "";
    display: block;
    inline-size: 72px;
    block-size: 2px;
    background: #d90000;
    margin-block-start: 0.5rem;
  }

  /* Optional editorial divider under a heading row */
  .section-head {
    padding-block-end: 1rem;
    margin-block-end: 1.5rem;
    border-block-end: 1px solid rgba(0,0,0,.08);
  }
}

@layer utilities {
  /* ---------- Overlay base ---------- */
  .overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 20; /* content in our hero is z-30 */
  }

  /* ---------- Grain (data-URI) ---------- */
  /* Lightweight noise texture; adjust opacity per size */
  .grain-sm { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAABG1FyoAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjFQb2dZAAAAPUlEQVR4Xu3OMQEAIAwEsQ7//2bQpKqg8wI2mPg2hxkQzvL3kz4/2A7EflQw8QDGyYwXH8wF8r4uN7oK0sK5CwD8GmOheQY2VbAAAAAElFTkSuQmCC"); background-size: 200px 200px; opacity: .08; }
  .grain-md { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAABG1FyoAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjFQb2dZAAAAPUlEQVR4Xu3OMQEAIAwEsQ7//2bQpKqg8wI2mPg2hxkQzvL3kz4/2A7EflQw8QDGyYwXH8wF8r4uN7oK0sK5CwD8GmOheQY2VbAAAAAElFTkSuQmCC"); background-size: 200px 200px; opacity: .14; }
  .grain-lg { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAABG1FyoAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjFQb2dZAAAAPUlEQVR4Xu3OMQEAIAwEsQ7//2bQpKqg8wI2mPg2hxkQzvL3kz4/2A7EflQw8QDGyYwXH8wF8r4uN7oK0sK5CwD8GmOheQY2VbAAAAAElFTkSuQmCC"); background-size: 200px 200px; opacity: .22; }

  /* ---------- Simple brand tints (multiply) ---------- */
  .tint-red     { background: #d90000; mix-blend-mode: multiply; opacity: .26; }
  .tint-blue    { background: #0055a4; mix-blend-mode: multiply; opacity: .26; }
  .tint-yellow  { background: #ffb800; mix-blend-mode: multiply; opacity: .20; }

  /* ---------- Extra colours for diversity ---------- */
  .tint-cyan    { background: #00bcd4; mix-blend-mode: multiply; opacity: .24; }
  .tint-magenta { background: #d81b60; mix-blend-mode: multiply; opacity: .24; }
  .tint-green   { background: #2e7d32; mix-blend-mode: multiply; opacity: .24; }

  /* ---------- Duotone pairs (layer two overlays) ----------
     Use one "multiply" + one "screen" overlay together. */
  .duo-multiply-red     { background: #a40000; mix-blend-mode: multiply; opacity: .36; }
  .duo-screen-yellow    { background: #ffe08a; mix-blend-mode: screen;   opacity: .34; }

  .duo-multiply-blue    { background: #003b7a; mix-blend-mode: multiply; opacity: .36; }
  .duo-screen-cyan      { background: #9be7ff; mix-blend-mode: screen;   opacity: .34; }

  .duo-multiply-magenta { background: #94003a; mix-blend-mode: multiply; opacity: .36; }
  .duo-screen-cream     { background: #fff3d6; mix-blend-mode: screen;   opacity: .34; }
}

@layer components {
  /* Base card primitives */
  .card        { @apply bg-white rounded-bau ring-1 ring-black/10 shadow-bau; }
  .card-pad    { @apply p-6 md:p-8; }
  .card-hover  { @apply transition hover:-translate-y-1; }
  .card-link   { @apply block no-underline text-inherit; }

  /* Solid colour cards (brand + diverse accents) */
  .card-solid-red     { @apply rounded-bau ring-1 ring-black/10 text-white  bg-bauRed; }
  .card-solid-blue    { @apply rounded-bau ring-1 ring-black/10 text-white  bg-bauBlue; }
  .card-solid-yellow  { @apply rounded-bau ring-1 ring-black/10 text-black  bg-bauYellow; }
  .card-solid-cyan    { @apply rounded-bau ring-1 ring-black/10 text-black  bg-[#00bcd4]; }
  .card-solid-magenta { @apply rounded-bau ring-1 ring-black/10 text-white  bg-[#d81b60]; }
  .card-solid-green   { @apply rounded-bau ring-1 ring-black/10 text-white  bg-[#2e7d32]; }

  /* Image card container */
  .card-img    { @apply relative overflow-hidden rounded-bau ring-1 ring-black/10 shadow-bau; }
  .card-img > img { @apply absolute inset-0 w-full h-full object-cover; }
}

